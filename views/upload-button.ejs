<!DOCTYPE html>
<html>
<head>
	<title>Posts from Other Users</title>
	<link rel="stylesheet" href="feed.css">
  <!-- Bootstrap CSS -->
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/navbars/">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        .navbar {
            z-index: 1 !important;
            background-color: orange !important;
            height: 90px;
          }
         </style>
</head>
<body>
   
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
	<main id="main-content">
    <div class="container mt-5">
      <div class="button-container">
        <a href="#" data-toggle="modal" data-target="#myModal">
          <img src="https://cdn-icons-png.flaticon.com/512/3820/3820184.png" alt="button icon" title="Upload Image" width="60" height="60">
        </a>
      </div>
    <!-- Pop-up modal -->
 <div class="modal fade" id="myModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Upload Image</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
     
      <div class="modal-body">
        <!-- Image upload form -->
        <form>
          <div class="form-group">
            <label for="image">Choose Image:</label>
            <input type="file" class="form-control-file" id="image" accept="image/*">
          </div>
          <!-- Image tag options -->
          <div class="form-group">
            <label for="tags">Tags:</label>
            <div class="row">
              <div class="col-4">
                <div class="form-check">
                  <input type="checkbox" class="form-check-input rounded" id="coding" name="hobbies">
                  <label class="form-check-label" for="coding">Coding</label>
                </div>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input rounded" id="reading" name="hobbies">
                  <label class="form-check-label" for="reading">Reading</label>
                </div>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input rounded" id="painting" name="hobbies">
                  <label class="form-check-label" for="painting">Painting</label>
                </div>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input rounded" id="gaming" name="hobbies">
                  <label class="form-check-label" for="gaming">Gaming</label>
                </div>
              </div>
              <div class="col-4">
                <div class="form-check">
                  <input type="checkbox" class="form-check-input rounded" id="hiking" name="hobbies">
                  <label class="form-check-label" for="hiking">Hiking</label>
                </div>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input rounded" id="dancing" name="hobbies">
                  <label class="form-check-label" for="dancing">Dancing</label>
                </div>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input rounded" id="singing" name="hobbies">
                  <label class="form-check-label" for="singing">Singing</label>
                </div>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input rounded" id="traveling" name="hobbies">
                  <label class="form-check-label" for="traveling">Traveling</label>
                </div>
              </div>
              <div class="col-4">
                <div class="form-check">
                  <input type="checkbox" class="form-check-input rounded" id="shopping" name="hobbies">
                  <label class="form-check-label" for="shopping">Shopping</label>
                </div>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input rounded" id="exercising" name="hobbies">
                  <label class="form-check-label" for="exercising">Exercising</label>
                </div>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input rounded" id="drawing" name="hobbies">
                  <label class="form-check-label" for="drawing">Drawing</label>
                </div>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input rounded"id="cooking" name="hobbies">
                  <label class="form-check-label" for="cooking">Cooking</label>
                  </div>
                  </div>
                  </div>
                  </div>
                  <!-- Caption input -->
                  <div class="form-group">
                  <label for="caption">Caption:</label>
                  <textarea class="form-control" id="caption" rows="3"></textarea>
                  </div>
                 
                    </form>
                  </div>
     
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary" id="upload-btn">Upload</button>
        <script>
// UPLOAD BUTTON 
window.addEventListener('load', () => {
  const uploadButton = document.getElementById("upload-btn");
  uploadButton.addEventListener("click", function() {
    // GET IMAGE
    const input = document.getElementById('image');
    const file = input.files[0];
    const reader = new FileReader();
    reader.addEventListener('load', (event) => {
      const imageDataUrl = event.target.result;
      if (!imageDataUrl){
        alert("Please insert image");
        return;
      } 
      // GET HOBBIES  
      const hobbies = [];
      const checkboxes = document.querySelectorAll('input[type="checkbox"][name="hobbies"]'); // returns list of checkboxes
      checkboxes.forEach((cb) => {if (cb.checked) hobbies.push(cb.id)});
    
      // GET CAPTION
      const caption = document.getElementById("caption").value;
      console.log(caption);
      
      // MAKE POST REQUEST
      fetch('/posts', {
        method: 'POST',
        body: JSON.stringify({
          caption : caption,
          hobbies : hobbies,
          picture: imageDataUrl
        }),
        headers: {"Content-Type":"application/json; charset=UTF-8" }
      }).catch((err)=>
        {console.error(err);
        })
    });
    reader.readAsDataURL(file);
  });
});
</script>
      </div>
    </div>
  </div>
</div>
</div>
</div>
</div>
<!-- Bootstrap JavaScript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

